---
title: 数据结构
cover: /assets/images/16.jpg
date: 2024-07-26
category:
  - Redis
tag:
  - 学习资料
---

<!-- more -->
## Redis常见数据结构它们的底层分别是如何实现的？适合哪些场景？

Redis有以下几种常用的数据结构：

1. 字符串（String）：Redis的最基本数据结构，底层实现是简单的**动态字符串**，适合存储简单的键值对数据。
2. 列表（List）：底层实现是**双向链表**和**压缩链表**，可以进行快速的插入和删除操作，适合用于实现消息队列、最新消息排行等场景。
3. 集合（Set）：底层实现是**哈希表**和**数组**，可以实现高效的插入、删除和查找操作，并且支持对多个集合进行交集、并集和差集等操作，适合用于去重、共同好友查找等场景。
4. 哈希（Hash）：底层实现是**哈希表**和**压缩链表**， 可以存储多个键值对，适合用于存储对象或者记录的多个字段。
5. 有序集合（Z Set）：底层实现是**跳表**和**压缩链表**的结合，可以对每个元素关联一个分数，并按照分数进行排序，适合用于排行榜、按权重获取数据等场景。
6. 位图（BitMap）：底层实现是用String类型作为底层数据结构实现的一种统计二值状态的数据类型，是一串连续的二进制数组（0和1），可以通过偏移量（offset）定位元素

根据以上数据结构的特点，Redis适合用于需要高性能、低延迟的场景，例如缓存、计数器、消息队列、实时排行榜等

![img](\assets\9fa26a74965efbf0f56b707a03bb9b7f-20230309232459468.png)

## 什么是跳表？

​	跳表是一种通过多层索引来实现的快速查找的数据结构，它结合了多层有序链表和层级索引的特点，具有简单实现、高校查找和扩展性好的优点。

跳表的节点：

- **数据域**：存储节点的值。
- **多层指针**：每个节点包含多个指针，这些指针指向同一层的下一个节点，以及下一层的相同数据的节点。

跳表的主要特点包括：

- **多层链表**：跳表的每一层都是一个有序链表，上层的节点是下层节点的一个子集。
- **随机化层数**：每个节点的层数是随机决定的，通常基于一定的概率模型（例如，每次向上一层的概率是1/2）。
- **快速搜索**：由于多层链表的存在，可以在高层快速跳过多个节点，实现快速搜索。
- **动态调整**：跳表可以在运行时动态地调整层数，以保持操作的效率。

## Zset为什么要使用两种数据结构？

面对不同数量的数据情况，需要用不同的数据结构。

- 数据量小的情况，需要压缩内存：选压缩链表（以时间换空间）

- 数据量大的情况，需要提查询效率：选跳表（以空间换时间）

## 为什么要使用跳表而不是二叉树或红黑树？

1. **实现简单**：相比于红黑树等平衡树，跳表的实现方式更加简单。它使用了层级结构和随机化的方式来实现平衡性，减少了实现的复杂性。跳表的插入、删除和查找操作的时间复杂度都是O(log n)，在实践中表现良好。
2. **占用空间小**：跳表相对于二叉树和红黑树具有更好的空间效率。跳表不需要存储额外的指针和颜色信息，只需要存储节点的值和层级索引。这使得跳表在空间占用方面更加节省。
3. **范围查询效率高**：跳表对于范围查询有较好的支持。通过跳表的层级结构，可以快速定位到需要的位置，从而实现高效的范围查询。





















































缓存一致性

- 读更新，写删除（缓存穿透）（先写再删，先删再写）
- 延时双删（缓存穿透）
- 异步更新

​	定时器

​	监听bin_log

- 单飞（singfly）



